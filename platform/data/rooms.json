{
  "categories": [
    { "id": "web", "name": "Web", "icon": "üåê", "color": "#4ade80" },
    { "id": "network", "name": "R√©seau", "icon": "üîå", "color": "#60a5fa" },
    { "id": "api", "name": "Applications / API", "icon": "‚öôÔ∏è", "color": "#a78bfa" },
    { "id": "red", "name": "Red Team", "icon": "üî¥", "color": "#f87171" },
    { "id": "blue", "name": "Blue Team", "icon": "üîµ", "color": "#38bdf8" },
    { "id": "forensics", "name": "Forensique", "icon": "üîç", "color": "#fbbf24" },
    { "id": "osint", "name": "OSINT", "icon": "üì°", "color": "#34d399" },
    { "id": "stego", "name": "St√©ganographie", "icon": "üñºÔ∏è", "color": "#c084fc" },
    { "id": "crypto", "name": "Cryptographie", "icon": "üîê", "color": "#fb923c" },
    { "id": "phishing", "name": "Phishing / Spam / Social Engineering", "icon": "üìß", "color": "#f472b6" }
  ],
  "rooms": [
    {
      "id": "dvwa-web",
      "category": "web",
      "title": "DVWA ‚Äì Vuln√©rabilit√©s web",
      "difficulty": "D√©butant",
      "description": "Damn Vulnerable Web Application : injection SQL, XSS, CSRF, upload de fichiers, etc. Parfait pour apprendre l‚ÄôOWASP Top 10.",
      "objectives": ["Comprendre l‚Äôinjection SQL", "Tester XSS r√©fl√©chi et stock√©", "Exploiter un upload de fichier", "Reproduire une attaque CSRF"],
      "machines": [
        { "name": "DVWA", "urlKey": "dvwa", "credentials": "admin / password" }
      ],
      "tasks": [
        { "title": "Cr√©er la base de donn√©es", "content": "Sur la page d‚Äôaccueil DVWA, clique sur ¬´ Create / Reset Database ¬ª en bas de page.", "tip": "Sans √ßa, les modules ne fonctionneront pas." },
        { "title": "SQL Injection (Low)", "content": "Va dans ¬´ SQL Injection ¬ª, niveau Low. Modifie le param√®tre id dans l‚ÄôURL pour injecter du SQL (ex: 1' OR '1'='1).", "tip": "Utilise sqlmap avec --cookie pour automatiser : rep√®re d‚Äôabord le cookie de session dans ton navigateur." },
        { "title": "XSS r√©fl√©chi", "content": "Dans ¬´ XSS (Reflected) ¬ª, entre un script dans le champ (ex: <script>alert(1)</script>) et observe le r√©sultat.", "tip": "En situation r√©elle, l‚Äôattaquant envoie un lien contenant le payload √† la victime." },
        { "title": "File Upload", "content": "Dans ¬´ File Upload ¬ª, uploade un fichier PHP (webshell) ou contourne la validation (double extension, type MIME).", "tip": "En Low, la validation est minimale. Passe en Medium/High pour des bypass plus avanc√©s." }
      ]
    },
    {
      "id": "juice-shop",
      "category": "web",
      "title": "OWASP Juice Shop",
      "difficulty": "Interm√©diaire",
      "description": "Application moderne volontairement vuln√©rable. Suis les d√©fis du scoreboard (ic√¥ne sur la page) pour pratiquer XSS, auth, API, etc.",
      "objectives": ["R√©soudre les d√©fis du scoreboard", "Tester l‚ÄôAPI et les vuln√©rabilit√©s modernes"],
      "machines": [
        { "name": "Juice Shop", "urlKey": "juice" }
      ],
      "tasks": [
        { "title": "Ouvrir le scoreboard", "content": "Clique sur l‚Äôic√¥ne du scoreboard (tableau des d√©fis) et choisis un d√©fi √† r√©soudre.", "tip": "Commence par les plus faciles (√©toiles)." },
        { "title": "XSS et auth", "content": "Plusieurs d√©fis concernent le vol de token, la connexion admin, ou l‚Äôinjection de script.", "tip": "Regarde les requ√™tes dans l‚Äôonglet R√©seau (F12) pour comprendre les appels API." }
      ]
    },
    {
      "id": "vuln-network",
      "category": "network",
      "title": "Pentest r√©seau ‚Äì vuln-network",
      "difficulty": "D√©butant",
      "description": "Une machine avec SSH (mot de passe faible) et Redis (sans authentification). Objectif : d√©couverte, exploitation, acc√®s.",
      "objectives": ["Scanner les ports et services", "Exploiter Redis non s√©curis√©", "Se connecter en SSH (credentials faibles ou brute force)"],
      "machines": [
        { "name": "Terminal attaquant", "urlKey": "terminal", "note": "Ou en CLI : make shell" },
        { "name": "vuln-network (SSH)", "url": "#", "note": "Depuis l'attaquant : ssh root@vuln-network ‚Äî mot de passe : labpassword" },
        { "name": "Redis", "url": "#", "note": "redis-cli -h vuln-network (depuis l‚Äôattaquant)" }
      ],
      "tasks": [
        { "title": "D√©couverte", "content": "Depuis le conteneur attaquant : nmap -sV vuln-network. Note les ports ouverts (22, 6379).", "tip": "nmap -sC ajoute des scripts de d√©tection." },
        { "title": "Redis sans auth", "content": "Depuis l‚Äôattaquant : redis-cli -h vuln-network. Tape INFO puis CONFIG GET dir pour voir la config.", "tip": "Redis sans mot de passe permet parfois d‚Äô√©crire des cl√©s (ex: cl√© SSH) pour escalade." },
        { "title": "SSH", "content": "Connecte-toi en SSH : ssh root@vuln-network (depuis l‚Äôattaquant) ou ssh root@localhost -p 4222 (depuis ta machine). Mot de passe : labpassword.", "tip": "Pour t‚Äôentra√Æner au brute force : hydra -l root -P wordlist.txt ssh://vuln-network." }
      ]
    },
    {
      "id": "vuln-api",
      "category": "api",
      "title": "API vuln√©rable ‚Äì vuln-api",
      "difficulty": "D√©butant",
      "description": "API REST avec SQLi, IDOR et authentification faible. Id√©al pour OWASP API Security.",
      "objectives": ["Tester l‚Äôauthentification (login)", "Exploiter un IDOR sur /api/users/<id>", "Injection SQL sur /api/products?q="],
      "machines": [
        { "name": "vuln-api", "urlKey": "api", "credentials": "admin / admin123 ou user / user123" }
      ],
      "tasks": [
        { "title": "Login", "content": "POST /api/login avec {\"login\":\"admin\",\"password\":\"admin123\"}. Tu re√ßois un ¬´ token ¬ª (factice).", "tip": "curl -X POST http://vuln-api:5000/api/login -H 'Content-Type: application/json' -d '{\"login\":\"admin\",\"password\":\"admin123\"}'" },
        { "title": "IDOR", "content": "Appelle GET /api/users/1 et GET /api/users/2. L‚ÄôAPI ne v√©rifie pas que tu es autoris√© √† voir l‚Äôutilisateur demand√©.", "tip": "Change l‚Äôid dans l‚ÄôURL pour acc√©der √† d‚Äôautres comptes." },
        { "title": "SQLi", "content": "GET /api/products?q= avec par ex. q=' OR '1'='1 pour extraire tous les produits. Utilise sqlmap pour automatiser.", "tip": "sqlmap -u 'http://vuln-api:5000/api/products?q=1' --batch" }
      ]
    },
    {
      "id": "red-team-scenario",
      "category": "red",
      "title": "Sc√©nario Red Team (solo)",
      "difficulty": "Interm√©diaire",
      "description": "M√®ne un sc√©nario d‚Äôattaque complet : recon ‚Üí exploitation ‚Üí acc√®s. Utilise toutes les cibles du lab et r√©dige un mini-rapport.",
      "objectives": ["Reconnaissance (nmap, nikto sur les cibles)", "Au moins un acc√®s (web, SSH ou Redis)", "R√©diger une note avec preuves"],
      "machines": [
        { "name": "Toutes les cibles", "url": "#", "note": "Utiliser les cartes par room : DVWA, Juice, bWAPP, api (m√™me port, hostnames dvwa.lab, juice.lab, etc.)" }
      ],
      "tasks": [
        { "title": "Cartographie", "content": "Depuis l‚Äôattaquant, scanne toutes les cibles (dvwa, juice-shop, bwapp, vuln-api, vuln-network) et note les services.", "tip": "nmap -sV pour chaque hostname." },
        { "title": "Exploitation", "content": "Choisis au moins une cible et obtiens un acc√®s ou des donn√©es (ex: SQLi sur DVWA, SSH sur vuln-network).", "tip": "Documente chaque commande et le r√©sultat." },
        { "title": "Rapport", "content": "R√©dige un court rapport : objectif, m√©thodo, vuln√©rabilit√©s trouv√©es, preuves (screenshot ou output).", "tip": "Structure : R√©sum√© ‚Üí M√©thode ‚Üí Vulns ‚Üí Recommandations." }
      ]
    },
    {
      "id": "blue-team-suricata",
      "category": "blue",
      "title": "Blue Team ‚Äì Suricata et analyse de trafic",
      "difficulty": "Interm√©diaire",
      "description": "Utilise Suricata pour analyser des captures de trafic (pcap). D√©marrer le lab avec le profil blue.",
      "objectives": ["Lancer le profil Blue (Suricata)", "Capturer du trafic pendant des scans", "Analyser les alertes Suricata"],
      "machines": [
        { "name": "Suricata", "url": "#", "note": "docker compose --profile blue up -d puis docker compose exec blue-suricata sh" }
      ],
      "tasks": [
        { "title": "D√©marrer Suricata", "content": "docker compose --profile blue up -d. Puis docker compose exec blue-suricata sh. Tu peux lancer sur un pcap : suricata -r /workspace/capture.pcap -l /var/log/suricata.", "tip": "Les pcaps peuvent √™tre copi√©s dans le volume suricata-pcaps." },
        { "title": "Capturer du trafic", "content": "Pendant que tu lances des scans (nmap, nikto) depuis l‚Äôattaquant, capture le trafic sur la machine h√¥te (tcpdump -i docker0 -w capture.pcap).", "tip": "Copie le fichier dans le volume pour l‚Äôanalyser avec Suricata." },
        { "title": "Lire les alertes", "content": "Apr√®s analyse, consulte /var/log/suricata/eve.json pour les √©v√©nements et alertes.", "tip": "jq peut aider √† parser le JSON." }
      ]
    },
    {
      "id": "forensics-pcap",
      "category": "forensics",
      "title": "Forensique ‚Äì Analyse de pcap",
      "difficulty": "D√©butant",
      "description": "Capture et analyse du trafic r√©seau avec tshark/tcpdump. Identifier des requ√™tes HTTP, des scans, etc.",
      "objectives": ["Capturer du trafic avec tcpdump", "Filtrer et analyser avec tshark", "R√©diger une courte fiche d‚Äôincident"],
      "machines": [
        { "name": "Conteneur attaquant", "url": "#", "note": "docker compose exec attaquant bash ‚Äî tshark, tcpdump disponibles" }
      ],
      "tasks": [
        { "title": "Capture", "content": "Depuis l‚Äôattaquant : tcpdump -i eth0 -w /workspace/capture.pcap. Dans un autre terminal, lance des requ√™tes (curl, nmap) puis arr√™te la capture.", "tip": "Limite le temps (tcpdump -G 60 -W 1 -i eth0 -w cap.pcap) ou Ctrl+C." },
        { "title": "Analyse tshark", "content": "tshark -r /workspace/capture.pcap -Y 'http' -T fields -e http.request.uri. Identifie les URLs et les param√®tres suspects.", "tip": "tshark -r file.pcap -Y 'tcp.flags.syn==1' pour les connexions TCP." }
      ]
    },
    {
      "id": "osint-recon",
      "category": "osint",
      "title": "OSINT ‚Äì Reconnaissance",
      "difficulty": "D√©butant",
      "description": "Utilise theHarvester et les outils de recon sur un domaine que tu contr√¥les (ou sur les hostnames du lab en interne).",
      "objectives": ["Utiliser theHarvester (domaine autoris√©)", "Faire une recon ¬´ interne ¬ª du lab (nmap, √©num√©ration)"],
      "machines": [
        { "name": "Conteneur attaquant", "url": "#", "note": "theHarvester, dig, curl" }
      ],
      "tasks": [
        { "title": "theHarvester", "content": "Sur un domaine dont tu as le droit : theHarvester -d ton-domaine.fr -b bing,google. Analyse les emails et sous-domaines.", "tip": "Ne cible que des domaines autoris√©s." },
        { "title": "Recon interne", "content": "Depuis l‚Äôattaquant, consid√®re les hostnames du lab (dvwa, juice-shop, vuln-network) comme des ¬´ cibles ¬ª. Fais un nmap et une √©num√©ration comme en pentest.", "tip": "Documente la cartographie comme un rapport de recon." }
      ]
    },
    {
      "id": "stego-intro",
      "category": "stego",
      "title": "St√©ganographie ‚Äì Introduction",
      "difficulty": "D√©butant",
      "description": "Apprends √† d√©tecter et extraire des donn√©es cach√©es dans des images. T√©l√©charge les d√©fis ci-dessous.",
      "objectives": ["Utiliser file, exiftool, binwalk", "Extraire un fichier cach√© avec steghide", "Trouver un flag dans les m√©tadonn√©es ou le contenu"],
      "challengeDownloads": [
        { "name": "Image avec donn√©es cach√©es (steghide)", "url": "/challenges/stego/image_stego.jpg", "password": "labstego" }
      ],
      "machines": [
        { "name": "Tous les d√©fis", "url": "/challenges/stego/", "note": "Liste des fichiers st√©gano" },
        { "name": "Terminal attaquant", "url": "#", "note": "docker compose exec attaquant bash ‚Äî steghide, exiftool, binwalk" }
      ],
      "tasks": [
        { "title": "Identifier le fichier", "content": "file image.jpg et exiftool image.jpg. Parfois le flag ou un indice est dans les m√©tadonn√©es.", "tip": "Les commentaires EXIF peuvent contenir un mot de passe." },
        { "title": "Binwalk", "content": "binwalk image.jpg pour d√©tecter des fichiers embarqu√©s. binwalk -e image.jpg pour les extraire dans un dossier.", "tip": "Un ¬´ .jpg ¬ª peut cacher une archive ZIP." },
        { "title": "Steghide", "content": "steghide info image.jpg pour voir si des donn√©es sont cach√©es. steghide extract -sf image.jpg puis entre le mot de passe si demand√©.", "tip": "Mot de passe courant pour les d√©fis du lab : labstego" }
      ]
    },
    {
      "id": "crypto-intro",
      "category": "crypto",
      "title": "Cryptographie ‚Äì Introduction",
      "difficulty": "D√©butant",
      "description": "Base64, chiffrement sym√©trique (OpenSSL), hachage. T√©l√©charge les d√©fis ci-dessous et d√©chiffre-les.",
      "objectives": ["D√©coder du Base64", "D√©chiffrer un fichier OpenSSL (mot de passe √† trouver)", "Identifier et casser un hash avec John"],
      "challengeDownloads": [
        { "name": "Flag en Base64", "url": "/challenges/crypto/flag_b64.txt", "password": null },
        { "name": "Fichier chiffr√© OpenSSL", "url": "/challenges/crypto/flag.enc", "password": "labcrypto" }
      ],
      "machines": [
        { "name": "Tous les d√©fis", "url": "/challenges/crypto/", "note": "Liste des fichiers crypto" },
        { "name": "Terminal attaquant", "url": "#", "note": "openssl, gpg, base64, john" }
      ],
      "tasks": [
        { "title": "Base64", "content": "echo 'TGFCX0NSWVBUX0ZMQUdfMQ==' | base64 -d pour obtenir le flag.", "tip": "Le flag du d√©fi 1 est encod√© en Base64." },
        { "title": "OpenSSL", "content": "Un fichier .enc est chiffr√© avec openssl enc -aes-256-cbc. openssl enc -d -aes-256-cbc -in flag.enc -out flag.txt. Mot de passe courant : labcrypto", "tip": "Si le mot de passe est inconnu, utilise une wordlist avec un script ou John (format sp√©cifique)." },
        { "title": "Hash", "content": "Pour un hash MD5/SHA : identifie le type puis john ou des tables rainbow. Ex: echo -n 'password' | openssl md5 pour v√©rifier.", "tip": "John : pr√©pare un fichier avec un hash par ligne (format user:hash ou juste hash selon le type)." }
      ]
    },
    {
      "id": "phishing-reconnaitre",
      "category": "phishing",
      "title": "Phishing ‚Äì Reconna√Ætre et analyser",
      "difficulty": "D√©butant",
      "description": "Apprends √† identifier une tentative de phishing (email, page web) et les bons r√©flexes pour ne pas tomber dans le pi√®ge.",
      "objectives": ["Reconna√Ætre les signaux d‚Äôalerte dans un email", "V√©rifier une URL et une page de connexion", "Comprendre ce qu‚Äôest une page type phishing (d√©mo)"],
      "machines": [
        { "name": "Exemple de page type phishing (d√©mo)", "url": "/demo-phishing.html", "note": "Page p√©dagogique sur cette plateforme ‚Äì √† ouvrir pour voir √† quoi ressemble une fausse page de connexion" }
      ],
      "tasks": [
        { "title": "Ouvrir la page de d√©mo", "content": "Clique sur ¬´ Exemple de page type phishing ¬ª ci-dessus. Observe : la banni√®re rouge (avertissement), l‚ÄôURL dans la barre d‚Äôadresse (localhost), le formulaire qui ressemble √† une vraie connexion.", "tip": "En situation r√©elle, l‚ÄôURL serait un faux domaine (ex: banque-securise.xyz) et il n‚Äôy aurait pas de banni√®re ‚Äì d‚Äôo√π l‚Äôimportance de toujours v√©rifier l‚ÄôURL." },
        { "title": "Indices dans un email de phishing", "content": "En g√©n√©ral : exp√©diteur qui imite un nom connu, lien dont l‚Äôadresse r√©elle (au survol) ne correspond pas au vrai site, urgence (¬´ Votre compte sera bloqu√© ¬ª), demande de clic ou de mot de passe.", "tip": "Ne jamais cliquer sur un lien de connexion re√ßu par email : aller sur le site en tapant l‚ÄôURL ou via un favori." },
        { "title": "V√©rifier une page de connexion", "content": "Toujours contr√¥ler : l‚ÄôURL exacte (domaine officiel), la pr√©sence de HTTPS et du cadenas, √©ventuellement le certificat (clic sur le cadenas).", "tip": "Les clones de pages (phishing) sont h√©berg√©s sur d‚Äôautres domaines ‚Äì une lecture attentive de la barre d‚Äôadresse suffit souvent." }
      ]
    },
    {
      "id": "spam-arnaques",
      "category": "phishing",
      "title": "Spam et arnaques ‚Äì Comprendre et se d√©fendre",
      "difficulty": "D√©butant",
      "description": "Spam, arnaques par email/SMS, fausses promesses et bonnes pratiques pour s‚Äôen prot√©ger et signaler.",
      "objectives": ["Distinguer spam, phishing et arnaques", "Conna√Ætre les bons r√©flexes (ne pas cliquer, signaler)", "Savoir o√π et comment signaler"],
      "machines": [],
      "tasks": [
        { "title": "Types de messages non sollicit√©s", "content": "Le spam peut √™tre : publicitaire, malveillant (phishing, pi√®ce jointe infect√©e), arnaque (gain fictif, faux support, urgence fiscale, faux dirigeant). Objectif : ne pas ouvrir, ne pas cliquer, ne pas r√©pondre.", "tip": "En entreprise, signaler √† la DSI ou au SOC selon la proc√©dure en vigueur." },
        { "title": "R√©flexes de base", "content": "Ne pas ouvrir les pi√®ces jointes suspectes ; ne pas activer les macros dans un document re√ßu par email ; ne jamais donner de mot de passe ou code par email/t√©l√©phone ; en cas de doute, contacter l‚Äôorganisme par un canal officiel (site connu, num√©ro du site officiel).", "tip": "Les arnaques jouent sur l‚Äôurgence et l‚Äô√©motion ‚Äì prendre du recul avant d‚Äôagir." },
        { "title": "Signalement", "content": "En France : signal-spam.fr pour les emails, signaler aussi sur signal.gouv.fr et cybermalveillance.gouv.fr. En entreprise : suivre la proc√©dure interne (ex: bouton ¬´ Signaler comme hame√ßonnage ¬ª).", "tip": "Le signalement aide √† faire bloquer les campagnes et √† prot√©ger les autres." }
      ]
    },
    {
      "id": "social-engineering",
      "category": "phishing",
      "title": "Social Engineering ‚Äì Principes et d√©fense",
      "difficulty": "D√©butant",
      "description": "Manipulation psychologique pour obtenir une action (cliquer, divulguer, ouvrir). Comprendre les techniques pour mieux s‚Äôen prot√©ger.",
      "objectives": ["Comprendre ce qu‚Äôest le social engineering", "Identifier les vecteurs (email, t√©l√©phone, physique)", "Appliquer les principes de d√©fense"],
      "machines": [],
      "tasks": [
        { "title": "D√©finition et objectifs", "content": "Le social engineering vise √† obtenir une action (cliquer sur un lien, donner un mot de passe, ouvrir une porte) en exploitant la confiance, l‚Äôurgence, l‚Äôautorit√© ou la peur. L‚Äôattaquant n‚Äôa pas besoin de vuln√©rabilit√© technique si la personne ¬´ ouvre la porte ¬ª.", "tip": "La sensibilisation et la politique de v√©rification (identit√© par un canal ind√©pendant) sont essentielles." },
        { "title": "Vecteurs courants", "content": "Email (phishing), t√©l√©phone (vishing : faux support, faux patron), SMS (smishing), r√©seaux sociaux, pr√©sence physique (tailgating, badge vol√©). En t√©l√©travail : demandes par messagerie ou appel pr√©tendant venir du support ou de la hi√©rarchie.", "tip": "Toujours v√©rifier l‚Äôidentit√© par un moyen ind√©pendant (rappeler sur le num√©ro officiel, contacter le support via le site officiel)." },
        { "title": "D√©fense", "content": "Ne jamais divulguer de mot de passe ou code par email/t√©l√©phone ; ne pas faire confiance √† un seul canal ; en cas de demande inhabituelle (virement, acc√®s), valider par un autre canal connu ; formation et exercices de sensibilisation (simulations autoris√©es).", "tip": "En entreprise, les simulations de phishing doivent √™tre autoris√©es et encadr√©es (RSSI, direction)." }
      ]
    }
  ]
}
